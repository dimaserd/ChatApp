function ErrorHandler(n){console.error(n.toString())}function GetValue(n){return document.getElementById(n).value}var ToastrWorker=function(){function n(){}return n.prototype.ShowError=function(n){var t={IsSucceeded:!1,Message:n};this.HandleBaseApiResponse(t)},n.prototype.ShowSuccess=function(n){var t={IsSucceeded:!0,Message:n};this.HandleBaseApiResponse(t)},n.prototype.HandleBaseApiResponse=function(n){if(n.IsSucceeded===undefined||n.Message===undefined){alert("Произошла ошибка. Объект не является типом BaseApiResponse");return}toastr.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};n.IsSucceeded?toastr.success(n.Message):toastr.error(n.Message)},n}(),Requester_Resx=function(){function n(){this.YouPassedAnEmtpyArrayOfObjects="Вы подали пустой объект в запрос";this.ErrorOccuredWeKnowAboutIt="Произошла ошибка! Мы уже знаем о ней, и скоро с ней разберемся!";this.FilesNotSelected="Файлы не выбраны"}return n}(),Requester=function(){function n(){}return n.prototype.SendPostRequestWithAnimation=function(t,i,r,u){n.SendAjaxPostInner(t,i,r,u)},n.prototype.Get=function(n,t,i,r){var u={type:"GET",data:t,url:n,async:!0,cache:!1,success:function(n){i&&i(n)}.bind(this),error:function(n,t,i){r&&r(n,t,i)}.bind(this)};$.ajax(u)},n.SendAjaxPostInner=function(n,t,i,r){var u,f;t==null&&(t={});u={};u.type="POST";u.data=t;u.url=n;u.async=!0;u.cache=!1;u.success=function(n){i&&i(n)}.bind(this);u.error=function(n,t,i){r&&r(n,t,i)}.bind(this);f=t.constructor===Array;f&&(u.contentType="application/json; charset=utf-8",u.dataType="json",u.data=JSON.stringify(t));$.ajax(u)},n.prototype.Post=function(t,i,r,u){n.SendAjaxPostInner(t,i,r,u)},n.Resources=new Requester_Resx,n}(),LoginResult,ChatApp,App;$(function(){var n=(new signalR.HubConnectionBuilder).withUrl("/appHub").withAutomaticReconnect().configureLogging(signalR.LogLevel.Information).build();n.on("onProductLikeRemoved",function(){});n.start().then(function(){n.invoke("getCart",{FromDataBase:!1}).catch(ErrorHandler)});$("#register-btn").on("click",function(){var t={Name:GetValue("register-name"),LastName:GetValue("register-name"),Email:GetValue("register-email"),Password:GetValue("register-pass")};n.invoke("register",t).catch(ErrorHandler)});$(document).on("click",".some-class",function(t){var i={Prop:t.currentTarget.getAttribute("some-attr")};n.invoke("removeCartItem",i).catch(ErrorHandler)})}),function(n){n[n.Error="Error"]="Error";n[n.AlreadyAuthenticated="AlreadyAuthenticated"]="AlreadyAuthenticated";n[n.UnSuccessfulAttempt="UnSuccessfulAttempt"]="UnSuccessfulAttempt";n[n.EmailNotConfirmed="EmailNotConfirmed"]="EmailNotConfirmed";n[n.SuccessfulLogin="SuccessfulLogin"]="SuccessfulLogin";n[n.NeedConfirmation="NeedConfirmation"]="NeedConfirmation";n[n.UserDeactivated="UserDeactivated"]="UserDeactivated"}(LoginResult||(LoginResult={}));ChatApp=function(){function n(){this.Requeter=new Requester;this.ToastrWorker=new ToastrWorker;this.SetHandlers();this.IsAuthenticated()}return n.prototype.MakeNoMesages=function(){$(".chat-footer").fadeOut();$(".messages").fadeOut();$(".chat-header").fadeOut();$(".no-message-container").fadeIn();document.getElementById("chats").classList.remove("active")},n.prototype.ShowMessages=function(){$(".chat-footer").fadeIn();$(".messages").fadeIn();$(".chat-header").fadeIn();$(".no-message-container").fadeOut()},n.prototype.OpenSideBar=function(){document.getElementsByClassName("sidebar-group")[0].classList.add("mobile-open")},n.prototype.OpenMainSideBar=function(){document.getElementById("main-side-bar").classList.add("mobile-open")},n.prototype.ShowContactInfo=function(){document.getElementById("profile-sidebar").classList.add("mobile-open");document.getElementById("contact-information").classList.add("active")},n.prototype.ShowLoginModal=function(){$("#loginModal").modal("show")},n.prototype.GetValueById=function(n){return document.getElementById(n).value},n.prototype.SetHandlers=function(){document.getElementById("login-btn").addEventListener("click",this.Login.bind(this));document.getElementById("register-btn").addEventListener("click",this.Register.bind(this))},n.prototype.IsAuthorizedHandler=function(n){console.log("IsAuthorizedHandler",n);n.IsAuthenticated||this.ShowLoginModal()},n.prototype.IsAuthenticated=function(){this.Requeter.Post("/Api/Account/IsAuthorized",{},this.IsAuthorizedHandler.bind(this),null)},n.prototype.RegisterHandler=function(n){this.ToastrWorker.HandleBaseApiResponse(n);n.IsSucceeded&&this.HideModals()},n.prototype.Register=function(){var n={Email:this.GetValueById("register-email"),LastName:this.GetValueById("register-lastname"),Name:this.GetValueById("register-name"),Password:this.GetValueById("register-pass")};this.Requeter.Post("/Api/Account/RegisterAndSignIn",n,this.RegisterHandler.bind(this),null)},n.prototype.LoginHandler=function(n){console.log("LoginHandler",n);this.ToastrWorker.HandleBaseApiResponse(n);n.IsSucceeded&&this.HideModals()},n.prototype.HideModals=function(){$(".modal").modal("hide");$(".modal-backdrop.fade").remove();$(".modal").on("shown.bs.modal",function(){})},n.prototype.Login=function(){var n={Email:this.GetValueById("login-username"),Password:this.GetValueById("login-password")};this.Requeter.Post("/Api/Account/Login",n,this.LoginHandler.bind(this),null)},n}();App=new ChatApp;